【スライダーUIプラグイン】

コンフィグ画面でスライダー、スイッチを使えるようにするプラグインです。
コンフィグ画面以外での利用は想定していないので不具合があるかもしれません。ていうかあります。

スライダーっていうのはこういうのです
===============○================
↑こういうの
○のところが動かせる

スイッチはこれ
○＝　→　＝○
↑○が動いてON/OFF切り替えとかができる
↑の図で言うと、右の状態がONで左の状態がOFFです


【使い方】
ティラノスクリプトの「others/plugin」フォルダに「slider_ui」フォルダをぶち込んで、first.ksに以下のように記述してください。
タグを記述した時点から、後述するタグが使えるようになリます。

[plugin name=slider_ui]


【使用可能タグ】
slider：スライダーを表示します。fixレイヤーに配置されるため、消去するときは[clearfix]タグを使用してください。
属性：
name（必須）        ：スライダーの名前を指定します。他のname属性値とかぶらないように（一意の値として）指定してください。
x（必須）           ：横方向の位置を指定します（単位：px）。
y（必須）           ：縦方向の位置を指定します（単位：px）。
width               ：スライダーの幅を指定します（単位：px）。初期値は400です。
height              ：スライダーの高さを指定します（単位：px）初期値は4です。
min                 ：スライダーで指定できる最小値を指定します。初期値は0です。
max                 ：スライダーで指定できる最大値を指定します。初期値は100です。
step                ：スライダーが1移動するときに変化する値の量を指定します。基本的に1を指定しておけばいいです。初期値は1です。
border              ：スライダーのボーダーの幅を指定します（単位：px）。初期値は0です。
border_color        ：ボーダーの色を指定します。初期値はwhiteです。
border_radius       ：スライダーの角丸の度合いを指定します（単位：px）。初期値は30です。
thumb_width         ：つまみの幅を指定します（単位：px）。初期値は30です。
thumb_height        ：つまみの高さを指定します（単位：px）。初期値は30です。
thumb_radius        ：つまみの角丸の度合いを指定します（単位：px）。初期値は30です。
thumb_color         ：つまみの色を指定します。初期値はwhiteです。
thumb_border        ：つまみのボーダーの幅を指定します（単位：px）。初期値は0です。
thumb_border_color  ：つまみのボーダーの色を指定します。初期値はwhiteです。
thumb_img           ：つまみの画像を指定します。画像はimageフォルダに配置します。
base_color          ：スライダーのベース色を指定します。初期値は#999です。
active_color        ：スライダーのつまみより左側の色を指定します。初期値はwhiteです。
base_img            ：スライダーのベース画像を指定します。色指定に優先して表示されます。
active_img          ：スライダーのつまみより左側の画像を指定します。色指定に優先して表示されます。
storage             ：スライダーの値を変更した（つまみの位置を止めた）ときにジャンプするシナリオ名を指定します。
target              ：スライダーの値を変更した（つまみの位置を止めた）ときにジャンプするラベル名を指定します。
exp                 ：スライダーの値を変更している（つまみを動かしている）ときに実行するJS式を記述します。
preexp              ：exp属性でmpオブジェクト内の変数を使いたい場合に、変数名を指定します。
var                 ：スライダーで指定した値を格納する変数名を指定します。
tip_width           ：現在の値を表示するツールチップの幅を指定します（単位：px）。初期値は0（表示なし）です。
tip_height          ：現在の値を表示するツールチップの幅を指定します（単位：px）。初期値は0（表示なし）です。
tip_color           ：ツールチップの色を指定します。初期値はwhiteです。
tip_radius          ：ツールチップの角丸の度合いを指定します（単位：px）。初期値は0です。
tip_text_color      ：ツールチップのテキスト色を指定します。初期値はblackです。
tip_text_size       ：ツールチップのテキストサイズを指定します。初期値は24です。
tip_tail            ：ツールチップに吹き出しのしっぽをつけるかを指定します。初期値はtrue（表示あり）です。
tip_pos             ：ツールチップを表示する位置を指定します。指定できる値はtop、bottomです。
tip_margin          ：ツールチップとスライダーの間隔を指定します（単位：px）。初期値は0です。
reverse             ：左側に最大値、右側に最小値としたい場合はtrueを指定。初期値はfalseです。


switch：スイッチを表示します。fixレイヤーに配置されるため、消去するときは[clearfix]タグを使用してください。
属性：
name（必須）        ：スイッチの名前を指定します。他のname属性値とかぶらないように（一意の値として）指定してください。
x（必須）           ：横方向の位置を指定します（単位：px）。
y（必須）           ：縦方向の位置を指定します（単位：px）。
width               ：スイッチの幅を指定します（単位：px）。初期値は60です。
height              ：スイッチの高さを指定します（単位：px）。初期値は4です。
border              ：スイッチのボーダーの幅を指定します（単位：px）。
border_color        ：ボーダーの色を指定します。
border_radius       ：スイッチの角丸の度合いを指定します（単位：px）。
thumb_width         ：つまみの幅を指定します（単位：px）。
thumb_height        ：つまみの高さを指定します（単位：px）。
thumb_radius        ：つまみの角丸の度合いを指定します（単位：px）。
thumb_color         ：つまみの色を指定します。
thumb_border        ：つまみのボーダーの幅を指定します（単位：px）。
thumb_border_color  ：つまみのボーダーの色を指定します。
thumb_img           ：つまみの画像を指定します。画像はimageフォルダに配置します。
base_color          ：スイッチがOFFになっているときの色を指定します。
active_color        ：スイッチがONになっているときの色を指定します。
base_img            ：スイッチがOFFになっているときの画像を指定します。
active_img          ：スイッチがONになっているときの画像を指定します。
storage             ：スイッチをON/OFF切り替えしたときにジャンプするシナリオ名を指定します。
target              ：スイッチをON/OFF切り替えしたときにジャンプするラベル名を指定します。
var                 ：スイッチで指定した値を格納する変数名を指定します。


【使い方のコツ】
例）
[iscript]
tf.bgm_exp = function(){
    TYRANO.kag.ftag.startTag("bgmopt", {
        volume: tf.current_bgm_vol
    })
}
[endscript]
[slider name=bgm target="*bgm" var="tf.current_bgm_vol" exp="tf.bgm_exp()" x=85  y=324 width=300 height=2 min=0 max=100 step=1 border_radius=0 thumb_width=24 thumb_height=24 thumb_img="config/thumb_slider.png" tip_width=72 tip_height=32 tip_color="#F2F2F2" tip_text_color="#333" tip_text_size=20 tip_pos=top tip_margin=30]
説明）
基本的には、varパラメータに変更した値を格納する変数名を指定し、targetパラメータに指定したジャンプ先でvarパラメータに指定した変数を利用して何らかの処理を行います。
また、expパラメータの使い方としては、上記の例では、まず[iscript]～[endscript]タグ内でBGM音量を変更する処理「tf.bgm_exp」を定義し、スライダーを動かすのに合わせてBGM音量が変更されるようになっています。


【サポート版を購入された方へ】
プラグインの導入、利用時にサポートが必要な場合は、注文番号を明記してショップ画面トップのメールアイコンよりメッセージをお願いします。
なお、プラグインの改造が必要な場合は別途お見積りとなりますのでご了承ください。


【既知の不具合・バグ】
・スライダー、スイッチのつまみに画像を指定した場合、iPhoneでつまみがちらつく


【免責事項】
このプラグインを使ったことにより発生した問題について、製作者は一切責任を負いません。
自己責任のもと使用してください。


【更新履歴】
2022/08/03　v1.5.4公開
・スライダーのactive部分が正しく表示されない不具合を修正

2022/07/24　v1.5.3公開
・スライダーのつまみ画像が表示されない不具合を修正
・reverse=trueの場合にツールチップが正しく表示されない不具合を修正

2022/05/01　v1.5.2公開
・reverseパラメータを追加

2022/02/26　v1.5.1公開
・ロードを挟んでタグを実行するとつまみが表示されない不具合を修正

2022/02/26　v1.5.0公開
・スマホでもスライダーがスライドできるように修正

2022/02/23　v1.4.1公開
・スライダー、スイッチのベースに画像を指定できるパラメータを追加

2022/02/13　v1.4公開
・スライダー、スイッチのベースに画像を指定できるパラメータを追加

2021/07/01　v1.3公開
・スライダー、スイッチのつまみに画像を指定できるパラメータを追加

2021/03/16　v1.2公開
・call中はスライダー・スイッチの入力を受け付けないよう修正
・色々バグ修正

2020/12/09　v1.1公開
・ツールチップ表示　追加
・readme整備

2020/07　v1.0
・正式公開